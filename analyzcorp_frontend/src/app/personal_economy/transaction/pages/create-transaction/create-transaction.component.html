<p-card>
  <form #accountForm="ngForm" class="transactionForm" (ngSubmit)="onSubmit()" id="transaction-form">
    <div>
      <label for="amount">Amount</label>
      <p-input-number
             id="amount"
             name="amount"
             class="createTransactionComponent"
             mode="currency"
             currency="{{getCurrency()}}"
             #amount="ngModel"
             [(ngModel)]="transactionModel.amount"
             type="text"
             required />
    </div>
    <div>
      <label for="currency">Currency</label>
      <p-select
        id="currency"
        name="currency"
        class="currencyComponent"
        [options]="currencies"
        [(ngModel)]="transactionModel.currency"
        optionLabel="code"
        />
    </div>
    <div>
      <label for="dateTransaction">Date</label>
      <p-datePicker
        inputId="dateTransaction"
        name="dateTransaction"
        styleClass="createTransactionComponent"
        [(ngModel)]="transactionModel.date"
        dateFormat="dd/mm/yy"></p-datePicker>
    </div>
    <div>
      <label for="category">Category</label>
      <p-select
        id="category"
        name="category"
        class="createTransactionComponent"
        [options]="categories"
        [(ngModel)]="transactionModel.category"
        optionLabel="name"
        (onChange)="showSelection($event)"
      />
    </div>
    <div>
      <label for="description">Description</label>
      <input
        id="description"
        name="description"
        type="text"
        class="createTransactionComponent"
        pInputText
        [(ngModel)]="transactionModel.description"
      />
    </div>
    <div>
      <label for="transactionType">Type</label>
      <p-selectButton
        id="transactionType"
        name="transactionType"
        class="createTransactionComponent"
        [options]="transactionType"
        [(ngModel)]="transactionModel.transactionType"/>
    </div>
    <div>
      <label for="account">Account</label>
      <p-select
        id="account"
        name="account"
        class="createTransactionComponent"
        [options]="accounts"
        optionLabel="alias"
        [(ngModel)]="transactionModel.account"
      >
        <ng-template let-account pTemplate="item">
          {{account.alias}} ({{account.iban}})
        </ng-template>
      </p-select>
    </div>

    <div class="buttons">
      <p-button type="submit" label="Submit" [disabled]="!accountForm.form.valid"/>
      <p-button label="cancel" severity="danger" (onClick)="cancelForm()"/>
    </div>

  </form>
</p-card>

<shared-message
  #message
  (confirm)="onCloseMessage()"
  (reject)="onCloseMessage()"
/>
